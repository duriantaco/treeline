
        <!DOCTYPE html>
        <html>
        <head>
            <title>Code Structure Visualization</title>
            <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"></script>
            <style>
                body { margin: 0; font-family: Arial, sans-serif; }
                .node { cursor: pointer; }
                .node circle { fill: #fff; stroke: steelblue; stroke-width: 1.5px; }
                .node text { font: 12px sans-serif; }
                .link { fill: none; stroke: #ccc; stroke-width: 1.5px; }
                .tooltip { 
                    position: absolute; 
                    padding: 8px;
                    background: white;
                    border: 1px solid #ddd;
                    border-radius: 4px;
                    pointer-events: none;
                    font-size: 12px;
                }
                #controls {
                    position: fixed;
                    top: 20px;
                    left: 20px;
                    background: white;
                    padding: 10px;
                    border-radius: 4px;
                    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
                }
                #search {
                    width: 200px;
                    padding: 5px;
                    margin-bottom: 10px;
                }
            </style>
        </head>
        <body>
            <div id="controls">
                <input type="text" id="search" placeholder="Search nodes...">
                <button onclick="resetZoom()">Reset Zoom</button>
                <button onclick="toggleLayout()">Toggle Layout</button>
            </div>
            <svg id="visualization"></svg>
            <script>
                const data = {"nodes": [{"id": 0, "name": "treeline.dependency_analyzer", "type": "module"}, {"id": 1, "name": "tests.test_special_char", "type": "module"}, {"id": 2, "name": "treeline.analyzer", "type": "module"}, {"id": 3, "name": "tests.test_security_detection", "type": "module"}, {"id": 4, "name": "tests.test_empty_dir", "type": "module"}, {"id": 5, "name": "treeline.__main__", "type": "module"}, {"id": 6, "name": "tests.test_missing_dir", "type": "module"}, {"id": 7, "name": "treeline.enhanced_analyzer", "type": "module"}, {"id": 8, "name": "tests.test_treeline", "type": "module"}, {"id": 9, "name": "treeline.core", "type": "module"}, {"id": 10, "name": "tests.test_nested_dir", "type": "module"}, {"id": 11, "name": "setup", "type": "module"}, {"id": 12, "name": "treeline.__init__", "type": "module"}, {"id": 13, "name": "treeline.security_analyzer", "type": "module"}, {"id": 14, "name": "tests.test_core", "type": "module"}, {"id": 15, "name": "TestTreelineSecurity", "type": "class"}, {"id": 16, "name": "TestTreeGenerator", "type": "class"}, {"id": 17, "name": "TestTreeLine", "type": "class"}, {"id": 18, "name": "ModuleDependencyAnalyzer", "type": "class"}, {"id": 19, "name": "CodeAnalyzer", "type": "class"}, {"id": 20, "name": "EnhancedCodeAnalyzer", "type": "class"}, {"id": 21, "name": "TreelineSecurity", "type": "class"}, {"id": 22, "name": "test_special_characters", "type": "function"}, {"id": 23, "name": "test_non_existent_directory", "type": "function"}, {"id": 24, "name": "test_empty_directory", "type": "function"}, {"id": 25, "name": "test_nested_directories", "type": "function"}, {"id": 26, "name": "__call__", "type": "function"}, {"id": 27, "name": "create_default_ignore", "type": "function"}, {"id": 28, "name": "read_ignore_patterns", "type": "function"}, {"id": 29, "name": "should_ignore", "type": "function"}, {"id": 30, "name": "clean_for_markdown", "type": "function"}, {"id": 31, "name": "format_structure", "type": "function"}, {"id": 32, "name": "generate_markdown_report", "type": "function"}, {"id": 33, "name": "generate_tree", "type": "function"}, {"id": 34, "name": "main", "type": "function"}], "links": [{"source": 3, "target": 15, "type": "contains"}, {"source": 14, "target": 16, "type": "contains"}, {"source": 8, "target": 17, "type": "contains"}, {"source": 0, "target": 18, "type": "contains"}, {"source": 2, "target": 19, "type": "contains"}, {"source": 7, "target": 20, "type": "contains"}, {"source": 13, "target": 21, "type": "contains"}, {"source": 1, "target": 22, "type": "contains"}, {"source": 6, "target": 23, "type": "contains"}, {"source": 4, "target": 24, "type": "contains"}, {"source": 10, "target": 25, "type": "contains"}, {"source": 12, "target": 26, "type": "contains"}, {"source": 9, "target": 27, "type": "contains"}, {"source": 9, "target": 28, "type": "contains"}, {"source": 9, "target": 29, "type": "contains"}, {"source": 9, "target": 30, "type": "contains"}, {"source": 9, "target": 31, "type": "contains"}, {"source": 9, "target": 32, "type": "contains"}, {"source": 9, "target": 33, "type": "contains"}, {"source": 9, "target": 34, "type": "contains"}, {"source": 22, "target": 33, "type": "calls"}, {"source": 23, "target": 33, "type": "calls"}, {"source": 24, "target": 33, "type": "calls"}, {"source": 25, "target": 33, "type": "calls"}, {"source": 26, "target": 33, "type": "calls"}, {"source": 34, "target": 33, "type": "calls"}, {"source": 32, "target": 30, "type": "calls"}, {"source": 33, "target": 28, "type": "calls"}, {"source": 33, "target": 32, "type": "calls"}, {"source": 33, "target": 29, "type": "calls"}, {"source": 34, "target": 27, "type": "calls"}, {"source": 3, "target": 13, "type": "imports"}, {"source": 1, "target": 9, "type": "imports"}, {"source": 6, "target": 9, "type": "imports"}, {"source": 4, "target": 9, "type": "imports"}, {"source": 14, "target": 9, "type": "imports"}, {"source": 10, "target": 9, "type": "imports"}, {"source": 5, "target": 9, "type": "imports"}]};

                let width = window.innerWidth;
                let height = window.innerHeight;
                
                const svg = d3.select("#visualization")
                    .attr("width", width)
                    .attr("height", height);

                const g = svg.append("g");

                const zoom = d3.zoom()
                    .scaleExtent([0.1, 4])
                    .on("zoom", (event) => {
                        g.attr("transform", event.transform);
                    });

                svg.call(zoom);

                function resetZoom() {
                    svg.transition().duration(750).call(
                        zoom.transform,
                        d3.zoomIdentity
                    );
                }

                let isRadial = false;
                const simulation = d3.forceSimulation()
                    .force("link", d3.forceLink().id(d => d.id).distance(100))
                    .force("charge", d3.forceManyBody().strength(-1000))
                    .force("center", d3.forceCenter(width / 2, height / 2));

                const tooltip = d3.select("body").append("div")
                    .attr("class", "tooltip")
                    .style("opacity", 0);

                const link = g.append("g")
                    .selectAll("path")
                    .data(data.links)
                    .join("path")
                    .attr("class", "link")
                    .attr("marker-end", "url(#arrowhead)");

                const node = g.append("g")
                    .selectAll(".node")
                    .data(data.nodes)
                    .join("g")
                    .attr("class", "node")
                    .call(drag(simulation));

                node.append("circle")
                    .attr("r", d => getNodeSize(d))
                    .style("fill", d => getNodeColor(d.type));

                node.append("text")
                    .attr("dy", ".35em")
                    .attr("x", d => getNodeSize(d) + 5)
                    .text(d => d.name)
                    .style("fill", "#333");

                simulation
                    .nodes(data.nodes)
                    .on("tick", ticked);

                simulation.force("link")
                    .links(data.links);

                function ticked() {
                    link.attr("d", linkArc);
                    node.attr("transform", d => `translate(${d.x},${d.y})`);
                }

                function linkArc(d) {
                    return `M${d.source.x},${d.source.y}L${d.target.x},${d.target.y}`;
                }

                function getNodeSize(node) {
                    switch(node.type) {
                        case 'module': return 8;
                        case 'class': return 6;
                        default: return 4;
                    }
                }

                function getNodeColor(type) {
                    switch(type) {
                        case 'module': return "#b7e2d8";
                        case 'class': return "#d1e0e4";
                        default: return "#e4d1d1";
                    }
                }

                function drag(simulation) {
                    function dragstarted(event) {
                        if (!event.active) simulation.alphaTarget(0.3).restart();
                        event.subject.fx = event.subject.x;
                        event.subject.fy = event.subject.y;
                    }

                    function dragged(event) {
                        event.subject.fx = event.x;
                        event.subject.fy = event.y;
                    }

                    function dragended(event) {
                        if (!event.active) simulation.alphaTarget(0);
                        event.subject.fx = null;
                        event.subject.fy = null;
                    }

                    return d3.drag()
                        .on("start", dragstarted)
                        .on("drag", dragged)
                        .on("end", dragended);
                }

                function toggleLayout() {
                    isRadial = !isRadial;
                    if (isRadial) {
                        simulation
                            .force("r", d3.forceRadial(250, width / 2, height / 2))
                            .force("charge", d3.forceManyBody().strength(-50));
                    } else {
                        simulation
                            .force("r", null)
                            .force("charge", d3.forceManyBody().strength(-1000));
                    }
                    simulation.alpha(1).restart();
                }

                // Search functionality
                d3.select("#search").on("input", function() {
                    const term = this.value.toLowerCase();
                    node.style("opacity", d => 
                        d.name.toLowerCase().includes(term) ? 1 : 0.1
                    );
                    link.style("opacity", d =>
                        d.source.name.toLowerCase().includes(term) ||
                        d.target.name.toLowerCase().includes(term) ? 1 : 0.1
                    );
                });

                // Window resize handler
                window.addEventListener("resize", () => {
                    width = window.innerWidth;
                    height = window.innerHeight;
                    svg.attr("width", width).attr("height", height);
                    simulation.force("center", d3.forceCenter(width / 2, height / 2));
                    simulation.alpha(1).restart();
                });
            </script>
        </body>
        </html>
        